// APPEND THIS TO schema-academic.prisma AFTER StudentSubject model

model AcademicPeriod {
  id          Int          @id @default(autoincrement())
  name        String       @unique // e.g., "2026-1", "2026-2"
  startDate   DateTime     @map("start_date")
  endDate     DateTime     @map("end_date")
  isActive    Boolean      @default(false) @map("is_active")
  createdAt   DateTime     @default(now()) @map("created_at")
  updatedAt   DateTime     @updatedAt @map("updated_at")
  enrollments Enrollment[]

  @@map("academic_periods")
}

model Enrollment {
  id               Int            @id @default(autoincrement())
  studentId        Int            @map("student_id")
  subjectId        Int            @map("subject_id")
  academicPeriodId Int            @map("academic_period_id")
  enrolledAt       DateTime       @default(now()) @map("enrolled_at")
  createdAt        DateTime       @default(now()) @map("created_at")
  updatedAt        DateTime       @updatedAt @map("updated_at")
  student          Student        @relation(fields: [studentId], references: [id], onDelete: Cascade)
  subject          Subject        @relation(fields: [subjectId], references: [id], onDelete: Cascade)
  academicPeriod   AcademicPeriod @relation(fields: [academicPeriodId], references: [id], onDelete: Cascade)

  @@unique([studentId, subjectId, academicPeriodId])
  @@index([studentId])
  @@index([subjectId])
  @@index([academicPeriodId])
  @@map("enrollments")
}
